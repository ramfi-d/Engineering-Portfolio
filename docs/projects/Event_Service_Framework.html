<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Service Framework for an Autonomous Robot - Rafael Delwart</title>
    <!-- External CSS -->
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/custom.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <!-- Color scheme and backgrounds -->
    <style>
        html, body {
            height: 100%;
            min-height: 100%;
            background: #FAF0DC !important;
        }

        #page-wrapper {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background: transparent;
        }

        .project-content {
            background: #FAF0DC !important;
            flex: 1 0 auto;
            min-height: 60vh;
            padding: 80px 0 40px 0 !important;
        }
        
        /* Change box background to light green */
        .box {
            background: #A9B494 !important;
        }
        
        /* Make post sections light green */
        .box.post {
            background: #A9B494 !important;
        }
        
        /* Remove green line under the h1 title */
        .project-detail-header h1:after {
            display: none;
        }
        
        /* Improve title text spacing and readability */
        .project-detail-header h1 {
            line-height: 1.3;
            letter-spacing: 0.01em;
            word-spacing: 0.05em;
            padding-bottom: 0;
            margin-bottom: 30px;
            max-width: 90%;
            margin-left: auto;
            margin-right: auto;
        }
    </style>
</head>

<body class="is-preload">
    <!-- Mobile title bar + toggle -->
    <div id="titleBar" aria-label="Main">
        <button class="toggle" aria-expanded="false" aria-controls="navPanel">
            <span class="sr-only">Open menu</span>
        </button>
    </div>

    <!-- Backdrop overlay for closing the panel on tap -->
    <div id="navOverlay" hidden></div>

    <!-- Slide-in mobile nav panel -->
    <nav id="navPanel" aria-hidden="true">
        <nav>
            <ul id="navPanelList"></ul>
        </nav>
    </nav>

    <div id="page-wrapper">
        <!-- Header -->
        <section id="header" style="background: #FAF0DC !important; box-shadow: 0 2px 12px rgba(0,0,0,0.04);">
            <!-- Navigation (Tabs) -->
            <nav id="nav">
                <ul>
                    <li><a href="../index.html" data-tab="home">Home</a></li>
                    <li><a href="../index.html#cv" data-tab="cv">CV</a></li>
                    <li><a href="../index.html#projects" data-tab="projects">Projects</a></li>
                    <li><a href="../index.html#courses" data-tab="courses">Courses</a></li>
                </ul>
            </nav>
        </section>

        <!-- Main Content -->
        <section class="project-content">
            <div class="container">
                <div class="project-detail">
                    <div class="project-detail-header">
                        <h1>Event Service Framework for an Autonomous Robot</h1>
                    </div>

                    <div class="project-detail-content">
                        <!-- Video Section -->
                        <section class="box post">
                            <div class="video-container-autonmous-bot">
                                <video controls width="100%">
                                    <source src="../assets/HSM_demo.mp4" type="video/mp4">
                                    Your browser does not support the video tag.
                                </video>
                            </div>
                            
                            <header>
                                <h3>Overview</h3>
                            </header>
                            <p>This project involved developing an event service framework for an autonomous roach. The
                                system, programmed in C, supports asynchronous event processing and a straightforward implementation
                                of Hierarchical State Machines (HSMs). The objective of the autonomous bot was to use its
                                onboard Light Dependent Resistor (LDR) sensors to find dark areas, mimicking the behavior of a
                                real cockroach. Once the roach finds darkness, it pauses its search algorithm until one of its
                                side bump sensors is triggered, simulating a human disturbance. When disturbed, the robot
                                performs a frantic evasive maneuver until it finds another dark spot to hide. The video demonstrates
                                the bot hiding under chairs and scurrying away to find another desk or chair to conceal itself
                                beneath.</p>
                        </section>

                        <!-- HSM Diagram Section -->
                        <section class="box post">
                            <header>
                                <h3>Hierarchical State Machine Design</h3>
                            </header>
                            <figure>
                                <img class="responsive-img-smaller" src="../images/Roach_HSM.png"
                                    alt="Hierarchical State Machine used to manage the movement of the cockroach">
                                <figcaption>Hierarchical State Machine used to manage the movement of the cockroach.</figcaption>
                            </figure>
                            
                            <p>The hierarchical state machine design enables the robot to efficiently transition between different states based on sensor inputs. 
                            This modular approach allows for complex behavior patterns to emerge from relatively simple state definitions and transitions.</p>
                        </section>
                        
                        <!-- Lab Report Section -->
                        <section class="box post">
                            <header>
                                <h3>Detailed Report: Autonomous Roach</h3>
                            </header>
                            
                            <div class="lab-report-container">
                                <a href="../assets/Lab_0_ECE118.pdf" target="_blank" class="lab-report-pdf-link">
                                    <img src="../images/Roach_Lab_Report_Cover.png" alt="Detailed Report Thumbnail" class="lab-report-thumbnail">
                                </a>
                                
                                <footer>
                                    <button class="lab-report-button alt lab-report-fullscreen-button open-pdf-fullscreen"
                                        data-pdf-url="../assets/Lab_0_ECE118.pdf">View Full Screen</button>
                                </footer>
                            </div>
                        </section>
                    </div>

                    <!-- Project navigation -->
                    <div class="project-navigation">
                        <a href="../index.html#projects" class="nav-back">
                            <i class="fas fa-arrow-left"></i> Back to Projects
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Back to top button -->
            <a href="#" class="back-to-top" id="backToTop">
                <i class="fas fa-arrow-up"></i>
            </a>
        </section>
    </div>

    <!-- External JavaScript Libraries -->
    <script src="../assets/js/jquery.min.js"></script>
    <script src="../assets/js/browser.min.js"></script>
    <script src="../assets/js/breakpoints.min.js"></script>
    <script src="../assets/js/util.js"></script>
    <script src="../assets/js/projects.js"></script>
    <script src="../assets/js/navigation.js"></script>
    
    <!-- Back to top button script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const backToTop = document.getElementById('backToTop');
            
            window.addEventListener('scroll', function() {
                if (window.scrollY > 300) {
                    backToTop.classList.add('visible');
                } else {
                    backToTop.classList.remove('visible');
                }
            });
            
            backToTop.addEventListener('click', function(e) {
                e.preventDefault();
                window.scrollTo({top: 0, behavior: 'smooth'});
            });
            
            // Handle mobile navigation
            const body = document.body;
            const panel = document.getElementById('navPanel');
            const panelList = document.getElementById('navPanelList');
            const toggleBtn = document.querySelector('#titleBar .toggle');
            const overlay = document.getElementById('navOverlay');

            if (panel && panelList && toggleBtn && overlay) {
                // Build the mobile menu from the desktop one
                function buildNavPanel() {
                    const desktopLinks = document.querySelectorAll('#nav > ul > li > a');
                    panelList.innerHTML = '';
                    desktopLinks.forEach(a => {
                        const li = document.createElement('li');
                        const clone = a.cloneNode(true);
                        clone.removeAttribute('tabindex');
                        li.appendChild(clone);
                        panelList.appendChild(li);
                    });
                }

                function openPanel() {
                    body.classList.add('navPanel-visible');
                    panel.setAttribute('aria-hidden', 'false');
                    toggleBtn.setAttribute('aria-expanded', 'true');
                    overlay.hidden = false;
                }

                function closePanel() {
                    body.classList.remove('navPanel-visible');
                    panel.setAttribute('aria-hidden', 'true');
                    toggleBtn.setAttribute('aria-expanded', 'false');
                    overlay.hidden = true;
                }

                toggleBtn.addEventListener('click', () => {
                    if (body.classList.contains('navPanel-visible')) closePanel(); else openPanel();
                });
                overlay.addEventListener('click', closePanel);
                panel.addEventListener('click', (e) => {
                    if (e.target.closest('a')) closePanel();
                });

                buildNavPanel();
            }
        });
    </script>
</body>
</html>
