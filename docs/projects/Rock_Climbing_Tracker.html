<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Climbing Tracker - Rafael Delwart</title>
    <!-- External CSS -->
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/custom.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <!-- Color scheme and backgrounds -->
    <style>
        html, body {
            height: 100%;
            min-height: 100%;
            background: #FAF0DC !important;
        }

        #page-wrapper {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background: transparent;
        }

        .project-content {
            background: #FAF0DC !important;
            flex: 1 0 auto;
            min-height: 60vh;
            padding: 80px 0 40px 0 !important;
        }
        
        /* Change box background to light green */
        .box {
            background: #A9B494 !important;
        }
        
        /* Make post sections light green */
        .box.post {
            background: #A9B494 !important;
        }
        
        /* Remove green line under the h1 title */
        .project-detail-header h1:after {
            display: none;
        }
        
        /* Improve title text spacing and readability */
        .project-detail-header h1 {
            line-height: 1.3;
            letter-spacing: 0.01em;
            word-spacing: 0.05em;
            padding-bottom: 0;
            margin-bottom: 30px;
            max-width: 90%;
            margin-left: auto;
            margin-right: auto;
        }
        
        /* Style for iframe wrapper */
        .pptx-iframe-wrapper {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 ratio */
            height: 0;
            overflow: hidden;
            max-width: 100%;
            margin: 30px 0;
        }
        
        .pptx-iframe-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            border-radius: var(--border-radius);
        }
    </style>
</head>

<body class="is-preload">
    <!-- Mobile title bar + toggle -->
    <div id="titleBar" aria-label="Main">
        <button class="toggle" aria-expanded="false" aria-controls="navPanel">
            <span class="sr-only">Open menu</span>
        </button>
    </div>

    <!-- Backdrop overlay for closing the panel on tap -->
    <div id="navOverlay" hidden></div>

    <!-- Slide-in mobile nav panel -->
    <nav id="navPanel" aria-hidden="true">
        <nav>
            <ul id="navPanelList"></ul>
        </nav>
    </nav>

    <div id="page-wrapper">
        <!-- Header -->
        <section id="header" style="background: #FAF0DC !important; box-shadow: 0 2px 12px rgba(0,0,0,0.04);">
            <!-- Navigation (Tabs) -->
            <nav id="nav">
                <ul>
                    <li><a href="../index.html" data-tab="home">Home</a></li>
                    <li><a href="../index.html#cv" data-tab="cv">CV</a></li>
                    <li><a href="../index.html#projects" data-tab="projects">Projects</a></li>
                    <li><a href="../index.html#courses" data-tab="courses">Courses</a></li>
                </ul>
            </nav>
        </section>

        <!-- Main Content -->
        <section class="project-content">
            <div class="container">
                <div class="project-detail">
                    <div class="project-detail-header">
                        <h1>Rock Climbing Tracker</h1>
                    </div>

                    <div class="project-detail-content">
                        <!-- GIF Animation Section -->
                        <section class="box post">
                            <img src="../assets/images/displacementXAnimation.gif" alt="X axis displacement of 1 meter" class="gif-image">
                            
                            <header>
                                <h3>Overview</h3>
                            </header>
                            <p>
                                This project involved development and testing of an activity classification system designed
                                to track rock climbing routes by measuring displacement throughout the route using a 9-DOF IMU
                                sensor, the BNO055. The sensor's acceleration data was double-integrated to derive the
                                displacement over time, with a state machine implemented for data collection in Calibration,
                                Recording, and Waiting states. Calibration mode ensured accuracy by requiring all sensor
                                types to be fully calibrated before data recording began. Data was recorded using CoolTerm and analyzed
                                in MATLAB, where preprocessing included debouncing, bias removal, and applying both low-pass
                                and high-pass filters to get human movement and eliminate the random spikes from the sensor.
                            </p>
                            <p>
                                Velocity and displacement were calculated by integrating the acceleration
                                data, and their visualizations provided insights into the movements captured by the sensor.
                                Initial trials along each axis produced some measurable error rates, which increased during
                                real-world climbing due to the complexities of motion and noise sensitivity.
                            </p>
                            <p>
                                The best results from climbing trials demonstrated increased error with longer climbs, 
                                highlighting the difficulties in filtering noise and accurately capturing complex movements. 
                                While the device showed potential, the results emphasized the limitations of using cheap IMUs 
                                for precise activity tracking in dynamic environments.
                            </p>
                        </section>
                        
                        <!-- Lab Report Section -->
                        <section class="box post">
                            <header>
                                <h3>Detailed Report: Rock Climbing Tracker</h3>
                            </header>
                            
                            <div class="lab-report-container">
                                <a href="../assets/Reports_PDFs/Rock_Climbing_Project.pdf" target="_blank" class="lab-report-pdf-link">
                                    <img src="../assets/images/Rock-Climbign-Report-Cover.png" alt="Detailed Report Thumbnail" class="lab-report-thumbnail">
                                </a>
                                
                                <footer>
                                    <button class="lab-report-button alt lab-report-fullscreen-button open-pdf-fullscreen"
                                        data-pdf-url="../assets/Reports_PDFs/Rock_Climbing_Project.pdf">View Full Screen</button>
                                </footer>
                            </div>
                        </section>
                        
                        <!-- Presentation Section -->
                        <section class="box post">
                            <header>
                                <h3>Presentation</h3>
                            </header>
                            
                            <div class="pptx-iframe-wrapper">
                                <iframe 
                                    src="https://docs.google.com/presentation/d/e/2PACX-1vS9F5SmxJDwwYlXors3bMC8JABm6DGpaJ7p7I9JBsxBcHQRXgsuEvpKKEElxc_LIxOZy53SHo5PIl8k/embed?start=true&loop=true&delayms=5000" 
                                    frameborder="0" 
                                    allowfullscreen="true" 
                                    mozallowfullscreen="true" 
                                    webkitallowfullscreen="true">
                                </iframe>
                            </div>
                        </section>
                    </div>

                    <!-- Project navigation -->
                    <div class="project-navigation">
                        <a href="../index.html#projects" class="nav-back">
                            <i class="fas fa-arrow-left"></i> Back to Projects
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Back to top button -->
            <a href="#" class="back-to-top" id="backToTop">
                <i class="fas fa-arrow-up"></i>
            </a>
        </section>
    </div>

    <!-- External JavaScript Libraries -->
    <script src="../assets/js/jquery.min.js"></script>
    <script src="../assets/js/browser.min.js"></script>
    <script src="../assets/js/breakpoints.min.js"></script>
    <script src="../assets/js/util.js"></script>
    <script src="../assets/js/projects.js"></script>
    <script src="../assets/js/navigation.js"></script>
    
    <!-- Back to top button script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const backToTop = document.getElementById('backToTop');
            
            window.addEventListener('scroll', function() {
                if (window.scrollY > 300) {
                    backToTop.classList.add('visible');
                } else {
                    backToTop.classList.remove('visible');
                }
            });
            
            backToTop.addEventListener('click', function(e) {
                e.preventDefault();
                window.scrollTo({top: 0, behavior: 'smooth'});
            });
            
            // Handle mobile navigation
            const body = document.body;
            const panel = document.getElementById('navPanel');
            const panelList = document.getElementById('navPanelList');
            const toggleBtn = document.querySelector('#titleBar .toggle');
            const overlay = document.getElementById('navOverlay');

            if (panel && panelList && toggleBtn && overlay) {
                // Build the mobile menu from the desktop one
                function buildNavPanel() {
                    const desktopLinks = document.querySelectorAll('#nav > ul > li > a');
                    panelList.innerHTML = '';
                    desktopLinks.forEach(a => {
                        const li = document.createElement('li');
                        const clone = a.cloneNode(true);
                        clone.removeAttribute('tabindex');
                        li.appendChild(clone);
                        panelList.appendChild(li);
                    });
                }

                function openPanel() {
                    body.classList.add('navPanel-visible');
                    panel.setAttribute('aria-hidden', 'false');
                    toggleBtn.setAttribute('aria-expanded', 'true');
                    overlay.hidden = false;
                }

                function closePanel() {
                    body.classList.remove('navPanel-visible');
                    panel.setAttribute('aria-hidden', 'true');
                    toggleBtn.setAttribute('aria-expanded', 'false');
                    overlay.hidden = true;
                }

                toggleBtn.addEventListener('click', () => {
                    if (body.classList.contains('navPanel-visible')) closePanel(); else openPanel();
                });
                overlay.addEventListener('click', closePanel);
                panel.addEventListener('click', (e) => {
                    if (e.target.closest('a')) closePanel();
                });

                buildNavPanel();
            }
        });
    </script>
</body>
</html>
